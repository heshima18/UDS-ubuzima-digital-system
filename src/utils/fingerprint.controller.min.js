function MatchTemplate(){var e=document.getElementById("enroldata").value,a=document.getElementById("matchdata").value;if(e.length>256&&a.length>256){var s='{"cmd":"match","data1":"'+e+'","data2":"'+a+'"}';try{ws.send(s)}catch(e){}}else document.getElementById("state").value="Please enter receipt first"}function RelinkDevice(){try{var e='{"cmd":"opendevice","data1":"","data2":""}';ws.send(e)}catch(e){}}function GetDeviceSN(){try{var e='{"cmd":"getsn","data1":"","data2":""}';ws.send(e)}catch(e){}}function AboutImage(){try{var e='{"cmd":"aboutimage","data1":"","data2":""}';ws.send(e)}catch(e){}}var ws;export function ConnectDevice(){if("WebSocket"in window){let e=connectFP("ws://127.0.0.1:21187/fps",e=>{});return e}return{success:!1,message:"Error: Browser not supported!"}}export function connectFP(host,callback){host="ws://127.0.0.1:21187/fps";try{ws=new WebSocket(host)}catch(e){return callback({success:!1,message:"Error: there was an error while connecting to the fingerprint SDK!"})}ws.onopen=function(){callback({success:!0,message:"connected to SDK!",socket:ws})},ws.onmessage=function(evt){var obj=eval("("+evt.data+")");switch(obj.workmsg){case 1:callback({success:!1,message:"Please turn on or connect your device"});break;case 2:callback({success:"awaiting",message:"Please press your finger..."});break;case 3:callback({success:"awaiting",message:"Please lift your finger..."});break;case 4:break;case 5:1==obj.retmsg?"null"==obj.data1||callback({success:!0,message:"Fingerprint template collection successful",type:"fp-data",data:obj.data1}):callback({success:!1,message:"Failed to collect fingerprint template"});break;case 6:1==obj.retmsg?"null"==obj.data1||callback({success:!0,message:"Registered fingerprint template successfully",type:"fp-data",data:obj.data1}):callback({success:!1,message:"Failed to register fingerprint template"});break;case 7:"null"==obj.image||callback({success:"awaiting",message:"Processing, place your finger again...",type:"fp-image",data:"data:image/png;base64,"+obj.image});break;case 8:callback({success:!1,message:"time out"});break;case 9:break;case 10:if("null"==obj.image);else{var en4=document.getElementById("e4");en4.value=obj.image}break;case 15:1==obj.retmsg?callback({success:!0,message:"Reconnected device successfully"}):callback({success:!1,message:"Failed to reconnect device"});break;case 18:"null"==obj.image||callback({success:!0,message:"Registered fingerprint template successfully",type:"fp-image",data:"data:image/png;base64,"+obj.image});break;case 19:callback({success:!0,message:"Registered fingerprint template successfully",type:"fp-image",data:"data:image/png;base64,"+obj.image})}},ws.onclose=function(){callback({success:!1,message:"connection to the fingerprint SDK was closed"})}}export function Relink(){ws.close(),connect("ws://127.0.0.1:21187/fps")}export function EnrollTemplate(){try{console.log("enrolling");var e="0",a="0",s='{"cmd":"enrol","data1":"'+e+'","data2":"'+a+'"}';ws.send(s)}catch(e){}return{success:"awaiting",message:"place your finger"}}export function GetTemplate(){try{var e="0",a="0",s='{"cmd":"capture","data1":"'+e+'","data2":"'+a+'"}';ws.send(s)}catch(e){}return{success:"awaiting",message:"place your finger"}}