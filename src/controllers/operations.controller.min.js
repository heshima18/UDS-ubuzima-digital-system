import query from"./query.controller";import errorMessage from"./response.message.controller";import id from"./randomInt.generator.controller";export const addOperation=async(e,s)=>{try{let{name:r,price:t,department:a}=e.body,n=id(),o=await query("insert into operations(id,name,price,department)values(?,?,?,?)",[n,r,t,a]);if(!o)return s.status(500).send({success:!1,message:errorMessage.is_error});s.send({success:!0,message:errorMessage.oc_message})}catch(e){console.log(e),s.status(500).send({success:!1,message:errorMessage.is_error})}};export const getOperations=async(e,s)=>{let r=await query("select operations.id,operations.name,price,departments.name as department_name, departments.id as department from operations inner join departments on operations.department = departments.id",[]);r?s.send({success:!0,message:r}):s.status(500).send({success:!1,message:errorMessage.is_error})};export const getOperation=async(e,s)=>{let{operation:r}=e.params,t=await query("select operations.id,operations.name,price,departments.name as department_name, departments.id as department from operations inner join departments on operations.department = departments.id where id = ?",[r]);if(t)return 0==t.length?s.status(404).send({success:!1,message:errorMessage._err_med_404}):void s.send({success:!0,message:t});s.status(500).send({success:!1,message:errorMessage.is_error})};