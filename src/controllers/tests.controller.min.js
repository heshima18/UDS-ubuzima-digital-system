import query from"./query.controller";import errorMessage from"./response.message.controller";import id from"./randomInt.generator.controller";export const addtest=async(e,s)=>{try{let{name:t,price:r,department:a}=e.body,n=id(),m=await query("insert into tests(id,name,department,price)values(?,?,?,?)",[n,t,a,r]);if(!m)return s.status(500).send({success:!1,message:errorMessage.is_error});s.send({success:!0,message:errorMessage.tc_message})}catch(e){console.log(e),s.status(500).send({success:!1,message:errorMessage.is_error})}};export const getTests=async(e,s)=>{let t=await query("select tests.id,tests.name,price,departments.name as department_name, departments.id as department from tests inner join departments on tests.department = departments.id",[]);t?s.send({success:!0,message:t}):s.status(500).send({success:!1,message:errorMessage.is_error})};export const getTest=async(e,s)=>{let{test:t}=e.params,r=await query("select tests.id,tests.name,price,departments.name as department_name, departments.id as department from tests inner join departments on tests.department = departments.id where id = ?",[t]);if(r)return 0==r.length?s.status(404).send({success:!1,message:errorMessage._err_med_404}):void s.send({success:!0,message:r});s.status(500).send({success:!1,message:errorMessage.is_error})};