import{alertMessage,getdata,getschema,postschema,request,initializeCleave,checkEmpty,showRecs,getchips,fT,addshade,addLoadingTab,removeLoadingTab,deletechild,aDePh}from"../../../utils/functions.controller.js";let q,w,e,r,t,y,u,i,o,p,a,s,d,f,g,h,j,k,l,z,x,c,v,b,n,m;u=getdata("token"),u||(window.location.href="../../login"),async function(){async function e(e,a){let s=addshade(),t=document.createElement("div");s.appendChild(t),t.className="br-10p cntr card p-10p bsbb w-60 h-80 b-mgc-resp",t.innerHTML=`<div class="w-100 h-100 p-5p bp-0-resp">\n                            <div class="head w-100 px-5p py-10p bsbb">\n                                <span class="capitalize bold-2 fs-20p">insurance&nbsp;&nbsp;<span class="consolas" data-holder="true" data-hold="name"># ${e}</span></span>\n                            </div>\n                            <div class="p-5p bsbb w-100 h-91 ovh p-r">\n                                <div class="w-100 h-100 ovys scroll-2 body">\n                                    <div class="testinfo my-5p">\n                                        <div class="flex jc-sb my-20p bsbb">\n                                            <span class="title bold-2 fs-16p capitalize center">managers</span>\n                                            <div class="p-10p my-5p mx-4p bsbb flex jc-sb">\n                                                <span class="btn-primary btn capitalize data-buttons btn-sm" data-role="add-manager" id="add-manager">add manager</span>\n                                            </div>\n                                        </div>\n                                        <div class="my-2p px-1p">\n                                            <ul class="card  ls-none my-10p iblock p-20p mx-5p my-5p bfull-resp bm-y-10p-resp bm-x-0-resp bblock-resp w-200p bfull-resp" name="looping-info" data-hold="managers">\n                                                <div class="x">\n                                                    <h5 class="card-title capitalize" name="looping-info-hol" data-hold="name" data-secondary-holder="true">[manager's-name]</h5>\n                                                    <p class="card-text" name="looping-info-hol" data-hold="title" data-secondary-holder="true">manager's-title</p>\n                                                    <p class="card-text"><small class="btn btn-sm btn-label-danger data-buttons" data-role="remove-manager" id="remove-manager">remove</small></p>\n                                                </div>\n                                            </ul>\n                                        </div>\n                                    </div>\n                                    <div class="testinfo my-5p">\n                                        <div class="flex jc-sb my-20p bsbb">\n                                            <span class="title bold-2 fs-16p capitalize center">restricted medications</span>\n                                            <div class="p-10p my-5p mx-4p bsbb flex jc-sb">\n                                                <span class="btn-primary btn capitalize data-buttons btn-sm" data-role="add-medication">add a medication</span>\n                                            </div>\n                                        </div>\n                                        <div class="my-2p px-1p">\n                                            <ul class="card  ls-none my-10p iblock p-20p mx-5p my-5p bfull-resp bm-y-10p-resp bm-x-0-resp bblock-resp w-200p bfull-resp" name="looping-info" data-hold="rstrct_m">\n                                                <li class="p-2p bsbb flex">\n                                                    <span class="bold-2 dgray card-title" name="looping-info-hol" data-hold="name" data-secondary-holder="true">[medication's-name]</span>\n                                                </li>\n                                                <li class="p-2p bsbb ">\n                                                    <span class="flex ">\n                                                        <span class="pdob black fs-14p" name="looping-info-hol" data-hold="price" data-secondary-holder="true">[medication's-price]</span>\n                                                        <span class="pname dgray fs-14p px-3p">RWF</span>\n                                                    </span>\n                                                    <p class="mt-10p"><small class="btn btn-sm btn-label-danger data-buttons" data-role="remove-medication" id="remove-medication">remove</small></p>\n                                                </li>\n                                            </ul>\n                                        </div>\n                                    </div>\n                                    <div class="testinfo my-5p">\n                                        <div class="flex jc-sb my-20p bsbb">\n                                            <span class="title bold-2 fs-16p capitalize center">restricted tests</span>\n                                            <div class="p-10p my-5p mx-4p bsbb flex jc-sb">\n                                                <span class="btn-primary btn capitalize data-buttons btn-sm" data-role="add-test">add a test</span>\n                                            </div>\n                                        </div>\n                                        <div class="my-2p px-1p">\n                                            <ul class="card  ls-none my-10p iblock p-20p mx-5p my-5p bfull-resp bm-y-10p-resp bm-x-0-resp bblock-resp w-200p bfull-resp" name="looping-info" data-hold="rstrct_t">\n                                                <li class="p-2p bsbb flex">\n                                                    <span class="bold-2 dgray card-title" name="looping-info-hol" data-hold="name" data-secondary-holder="true">[tet's-name]</span>\n                                                </li>\n                                                <li class="p-2p bsbb ">\n                                                    <span class="flex">\n                                                        <span class="pdob black fs-14p" name="looping-info-hol" data-hold="price" data-secondary-holder="true">[test's-price]</span>\n                                                        <span class="pname dgray fs-14p px-3p">RWF</span>\n                                                    </span>\n                                                    <p class="mt-10p"><small class="btn btn-sm btn-label-danger data-buttons" data-role="remove-test" id="remove-test">remove</small></p>\n                                                </li>\n                                            </ul>\n                                        </div>\n                                    </div>\n                                    <div class="testinfo my-5p">\n                                        <div class="flex jc-sb my-20p bsbb">\n                                            <span class="title bold-2 fs-16p capitalize center">restricted equipments</span>\n                                            <div class="p-10p my-5p mx-4p bsbb flex jc-sb">\n                                                <span class="btn-primary btn capitalize data-buttons btn-sm" data-role="add-equipment">add an equipment</span>\n                                            </div>\n                                        </div>\n                                        <div class="my-2p px-1p">\n                                            <ul class="card  ls-none my-10p iblock p-20p mx-5p my-5p bfull-resp bm-y-10p-resp bm-x-0-resp bblock-resp w-200p bfull-resp" name="looping-info" data-hold="rstrct_e">\n                                                <li class="p-2p bsbb flex">\n                                                    <span class="bold-2 dgray card-title" name="looping-info-hol" data-hold="name" data-secondary-holder="true">[equipments's-name]</span>\n                                                </li>\n                                                <li class="p-2p bsbb ">\n                                                    <span class="flex">\n                                                        <span class="pdob black fs-14p" name="looping-info-hol" data-hold="price" data-secondary-holder="true">[equipments's-price]</span>\n                                                        <span class="pname dgray fs-14p px-3p">RWF</span>\n                                                    </span>\n                                                    <p class="mt-10p"><small class="btn btn-sm btn-label-danger data-buttons" data-role="remove-equipment" id="remove-equipment">remove</small></p>\n                                                </li>\n                                            </ul>\n                                        </div>\n                                    </div>\n                                    <div class="testinfo my-5p">\n                                        <div class="flex jc-sb my-20p bsbb">\n                                            <span class="title bold-2 fs-16p capitalize center">restricted operations</span>\n                                            <div class="p-10p my-5p mx-4p bsbb flex jc-sb">\n                                                <span class="btn-primary btn capitalize data-buttons btn-sm" data-role="add-operation">add an operation</span>\n                                            </div>\n                                        </div>\n                                        <div class="my-2p px-1p">\n                                            <ul class="card  ls-none my-10p iblock p-20p mx-5p my-5p bfull-resp bm-y-10p-resp bm-x-0-resp bblock-resp w-200p bfull-resp" name="looping-info" data-hold="rstrct_o">\n                                                <li class="p-2p bsbb flex">\n                                                    <span class="bold-2 dgray card-title" name="looping-info-hol" data-hold="name" data-secondary-holder="true">[operations's-name]</span>\n                                                </li>\n                                                <li class="p-2p bsbb ">\n                                                    <span class="flex">\n                                                        <span class="pdob black fs-14p" name="looping-info-hol" data-hold="price" data-secondary-holder="true">[operations's-price]</span>\n                                                        <span class="pname dgray fs-14p px-3p">RWF</span>\n                                                    </span>\n                                                    <p class="mt-10p"><small class="btn btn-sm btn-label-danger data-buttons" data-role="remove-operation" id="remove-operation">remove</small></p>\n                                                </li>\n                                            </ul>\n                                        </div>\n                                    </div>\n                                    <div class="testinfo my-5p">\n                                        <div class="flex jc-sb my-20p bsbb">\n                                            <span class="title bold-2 fs-16p capitalize center">restricted services</span>\n                                            <div class="p-10p my-5p mx-4p bsbb flex jc-sb">\n                                                <span class="btn-primary btn capitalize data-buttons btn-sm" data-role="add-service">add a service</span>\n                                            </div>\n                                        </div>\n                                        <div class="my-2p px-1p">\n                                            <ul class="card  ls-none my-10p iblock p-20p mx-5p my-5p bfull-resp bm-y-10p-resp bm-x-0-resp bblock-resp w-200p bfull-resp" name="looping-info" data-hold="rstrct_s">\n                                                <li class="p-2p bsbb flex">\n                                                    <span class="bold-2 dgray card-title" name="looping-info-hol" data-hold="name" data-secondary-holder="true">[services's-name]</span>\n                                                </li>\n                                                <li class="p-2p bsbb ">\n                                                    <span class="flex">\n                                                        <span class="pdob black fs-14p" name="looping-info-hol" data-hold="price" data-secondary-holder="true">[services's-price]</span>\n                                                        <span class="pname dgray fs-14p px-3p">RWF</span>\n                                                    </span>\n                                                    <p class="mt-10p"><small class="btn btn-sm btn-label-danger data-buttons" data-role="remove-service" id="remove-service">remove</small></p>\n                                                </li>\n                                            </ul>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        </div>`;let n=t.querySelector("div.body");if(addLoadingTab(n),postschema.body=JSON.stringify({token:getdata("token")}),e=await request(`assurance/${e}`,postschema),!e.success)return alertMessage(e.message);e=e.message,removeLoadingTab(n);let r=Array.from(t.querySelectorAll('[data-holder="true"]'));r.map(function(a){a.innerText=e[a.getAttribute("data-hold")]});const l=Array.from(document.querySelectorAll('ul[name="looping-info"]'));for(const a of l){let s=a.getAttribute("data-hold"),t=e[s];if(t.length){for(const e of t){let s=a.cloneNode(!0),t=s.querySelector(".data-buttons");t&&t.setAttribute("data-id",e.id);let n=Array.from(s.querySelectorAll('[name="looping-info-hol"]'));for(const a of n)a.innerText=e[a.getAttribute("data-hold")];a.parentNode.appendChild(s)}a.parentNode.removeChild(a)}else aDePh(a.parentElement),a.parentNode.removeChild(a)}let i=Array.from(t.querySelectorAll(".data-buttons"));i.forEach(async s=>{s.addEventListener("click",function(t){if(t.preventDefault(),s.classList.contains("loading"))return 0;let n=s.getAttribute("data-role"),r=new magic(e.id);switch(n){case"add-manager":r.addManager(a.users);break;case"add-medication":r.addMedication(a.medicines);break;case"add-test":r.addTest(a.tests);break;case"add-operation":r.addOperation(a.operations);break;case"add-equipment":r.addEquipment(a.equipments);break;case"add-service":r.addService(a.services);break;case"remove-manager":r.removeManager(this);break;case"remove-medication":r.removeMedicine(this);break;case"remove-test":r.removeTest(this);break;case"remove-operation":r.removeOperation(this);break;case"remove-equipment":r.removeEquipment(this);break;case"remove-service":r.removeService(this)}})})}m=await request("get-assurances",getschema),postschema.body=JSON.stringify({token:getdata("token")});try{f=document.querySelector("form#add-assurance-form"),i=Array.from(f.querySelectorAll(".form-control")),b=f.querySelector('button[type="submit"]')}catch(e){console.log(e)}if(f.addEventListener("submit",async e=>{e.preventDefault(),v=1;for(const e of i)n=checkEmpty(e),n||(v=0);if(v){x={};for(const e of i)e.classList.contains("bevalue")?Object.assign(x,{[e.name]:e.getAttribute("data-id")}):Object.assign(x,{[e.name]:e.value});Object.assign(x,{token:getdata("token")}),postschema.body=JSON.stringify(x),b.setAttribute("disabled",!0),b.textContent="Recording assurance info...",a=await request("add-assurance",postschema),b.removeAttribute("disabled"),b.textContent="Submit",a.success?(alertMessage(a.message),f.reset()):alertMessage(a.message)}}),q=await request("getmeds",postschema),f=await request("get-tests",postschema),l=await request("get-equipments",postschema),k=await request("get-services",postschema),j=await request("get-operations",postschema),u=await request("get-employees-by-role/insurance_manager",postschema),!(q.success&&f.success&&l.success&&k.success&&j.success&&u.success))return alertMessage(q.message);let s={users:u.message,tests:f.message,medicines:q.message,equipments:l.message,services:k.message,operations:j.message};$(document).ready(function(){if(!m.success)return alertMessage(m.message);m=m.message;const a=document.querySelector(".datatables-health-posts");var t=$(".datatables-health-posts"),n=t.DataTable({dom:'<"row mx-2"<"col-md-2"<"me-3"l>><"col-md-10"<"dt-action-buttons text-xl-end text-lg-start text-md-end text-start d-flex align-items-center justify-content-end flex-md-row flex-column mb-3 mb-md-0"fB>>>t<"row mx-2"<"col-sm-12 col-md-6"i><"col-sm-12 col-md-6"p>>',language:{sLengthMenu:"_MENU_",search:"",searchPlaceholder:"Search..."},columns:[{data:""},{data:"name",title:"name"},{data:"managers",title:"managers"},{data:"",title:"Action"}],columnDefs:[{className:"control",searchable:!1,orderable:!1,responsivePriority:2,targets:0,render:function(){return""}},{targets:1,searchable:1,orderable:1,render:function(e,a,s,t){return`<span class='d-block fw-semibold capitalize'>${e}</span>`}},{targets:2,searchable:1,orderable:1,render:function(e,a,s,t){return`<span class='d-block fw-semibold capitalize'>${e.length}</span>`}},{targets:-1,searchable:!1,orderable:!1,render:function(e,a,s,t){return`<div class="d-inline-block text-nowrap">\n                                    <button class="btn btn-sm btn-icon" data-role="button"  data-id="${s.id}" id="view"><i class="bx bx-show-alt"></i></button>\n                                    <button class="btn btn-sm btn-icon" data-role="button" data-id="${s.id}" id="delete"><i class="bx bx-trash"></i></button>\n                                </div>`}}],order:[[1,"asc"]],data:m,buttons:[{extend:"collection",className:"btn btn-outline-secondary dropdown-toggle mx-3",text:'<i class="bx bx-export me-1"></i>Export',buttons:[{extend:"print",text:'<i class="bx bx-printer me-2" ></i>Print',className:"dropdown-item"},{extend:"excel",text:'<i class="bx bxs-file-export me-2"></i>Excel',className:"dropdown-item"},{extend:"pdf",text:'<i class="bx bxs-file-pdf me-2"></i>Pdf',className:"dropdown-item"}]},{text:'<i class="bx bx-plus me-0 me-sm-1"></i><span class="d-none d-sm-inline-block">Add New</span>',className:"add-new btn btn-primary",attr:{"data-bs-toggle":"modal","data-bs-target":"#add-assurance"}}],responsive:{details:{display:$.fn.dataTable.Responsive.display.modal({header:function(e){return"Details of "+e.data().name}}),type:"column",renderer:function(e,a,s){return s=$.map(s,function(e,a){return""!==e.title?'<tr data-dt-row="'+e.rowIndex+'" data-dt-column="'+e.columnIndex+'"><td>'+e.title+":</td> <td>"+e.data+"</td></tr>":""}).join(""),!!s&&$('<table class="table"/><tbody />').append(s)}}},initComplete:function(){}});t.find("tbody").on("click",".delete-health-post",function(){confirm("Are you sure you want to delete this health post?")&&n.row($(this).parents("tr")).remove().draw()});let r=Array.from(a.querySelectorAll('[data-role="button"]'));for(const a of r)a.addEventListener("click",function(a){a.preventDefault();let t=this.getAttribute("data-id");e(t,s)});$("#add-assurance").on("shown.bs.modal",function(){})})}();class magic{constructor(e){this.assurance=e}async addManager(e){let a=addshade(),s=document.createElement("div");s.className="br-10p cntr card p-10p bsbb w-60 h-80 b-mgc-resp",a.appendChild(s),s.className="w-350p h-a p-10p bsbb bc-white cntr zi-10000 br-5p b-mgc-resp card",s.innerHTML='<div class="head w-100 h-50p py-10p px-15p bsbb">\n                            <span class="fs-18p bold-2 dgray capitalize igrid h-100 card-title">add a manager to Insurance</span>\n                        </div>\n                        <div class="body w-100 h-a p-5p grid">\n                            <form method="post" id="req-test-info-form" name="req-test-info-form">\n                                <div class="col-md-12 px-10p py-6p bsbb p-r">\n                                    <label for="test" class="form-label">Manager\'s name</label>\n                                    <input type="text" class="form-control bevalue" id="manager" placeholder="Manager" name="manager">\n                                    <small class="w-100 red pl-3p verdana"></small>\n                                </div>\n                                <div class="px-10p bsbb bblock-resp">\n                                    <button type="submit" class="btn btn-primary">Proceed</button>\n                                </div>\n                            </form>\n                        </div>';let t=s.querySelector("form"),n=Array.from(t.querySelectorAll("input")),r=n.find(function(e){return e.classList.contains("bevalue")});r.addEventListener("focus",a=>{showRecs(r,e,r.id)}),t.addEventListener("submit",async e=>{e.preventDefault(),l=1;for(const e of n)v=checkEmpty(e),v||(l=0);if(l){let e=t.querySelector('button[type="submit"]');e.innerHTML='<span class="spinner-border" role="status" aria-hidden="true"></span>',e.setAttribute("disabled",!0);let s={};for(const e of n)Object.assign(s,{[e.name]:e.classList.contains("bevalue")?e.getAttribute("data-id"):e.value});Object.assign(s,{token:getdata("token"),assurance:this.assurance}),delete s.quantity,postschema.body=JSON.stringify(s);let r=await request("aMtA",postschema);r.success&&deletechild(a,a.parentElement),alertMessage(r.message),e.removeAttribute("disabled"),e.innerHTML="proceed"}})}addMedication(e){let s=addshade();a=document.createElement("div"),s.appendChild(a),a.className="w-350p h-a p-10p bsbb bc-white cntr zi-10000 br-5p b-mgc-resp card",a.innerHTML='<div class="head w-100 h-50p py-10p px-15p bsbb">\n                            <span class="fs-18p bold-2 dgray capitalize igrid h-100 card-title">add a medication to restricted list</span>\n                        </div>\n                        <div class="body w-100 h-a p-5p grid">\n                            <form method="post" id="add-medicine-form" name="add-medicine-form">\n                                <div class="col-md-12 p-10p bsbb mb-5p p-r">\n                                    <label for="medicines" class="form-label">medications</label>\n                                    <input type="text" class="form-control extras chips-check no-quantity-addin" id="medicines" placeholder="Medication Name" name="medicines">\n                                    <small class="hidden w-100 red pl-3p verdana"></small>\n                                </div>\n                                <div class="wrap center-2 px-10p bsbb bblock-resp my-15p">\n                                    <button type="submit" class="btn btn-primary bfull-resp bm-a-resp bmy-10p-resp">Proceed</button>\n                                </div>\n                            </form>\n                        </div>';let t=a.querySelector("form"),n=Array.from(t.querySelectorAll("input")),r=n.find(function(e){return e.classList.contains("extras")});r.addEventListener("focus",a=>{showRecs(r,e,r.id)}),t.addEventListener("submit",async e=>{e.preventDefault(),l=1;for(const e of n)v=checkEmpty(e),v||(l=0);if(l){let e=t.querySelector('button[type="submit"]');e.innerHTML='<span class="spinner-border" role="status" aria-hidden="true"></span>',e.setAttribute("disabled",!0);let a={};for(const e of n)Object.assign(a,{[e.name]:getchips(e.parentNode.querySelector("div.chipsholder"),["id"])});Object.assign(a,{assurance:this.assurance,token:getdata("token")}),postschema.body=JSON.stringify(a);let r=await request("aMeDtA",postschema);r.success&&deletechild(s,s.parentElement),alertMessage(r.message),e.removeAttribute("disabled"),e.innerHTML="proceed"}})}addTest(e){let s=addshade();a=document.createElement("div"),s.appendChild(a),a.className="w-350p h-a p-10p bsbb bc-white cntr zi-10000 br-5p b-mgc-resp card",a.innerHTML='<div class="head w-100 h-50p py-10p px-15p bsbb">\n                            <span class="fs-18p bold-2 dgray capitalize igrid h-100 card-title">add a test to restricted list</span>\n                        </div>\n                        <div class="body w-100 h-a p-5p grid">\n                            <form method="post" id="add-test-form" name="add-test-form">\n                                <div class="col-md-12 p-10p bsbb mb-5p p-r">\n                                    <label for="tests" class="form-label">tests</label>\n                                    <input type="text" class="form-control extras chips-check no-extra-info-addin" id="tests" placeholder="Test Name" name="tests">\n                                    <small class="hidden w-100 red pl-3p verdana"></small>\n                                </div>\n                                <div class="wrap center-2 px-10p bsbb bblock-resp my-15p">\n                                    <button type="submit" class="btn btn-primary bfull-resp bm-a-resp bmy-10p-resp">Proceed</button>\n                                </div>\n                            </form>\n                        </div>';let t=a.querySelector("form"),n=Array.from(t.querySelectorAll("input")),r=n.find(function(e){return e.classList.contains("extras")});r.addEventListener("focus",a=>{showRecs(r,e,r.id)}),t.addEventListener("submit",async e=>{e.preventDefault(),l=1;for(const e of n)v=checkEmpty(e),v||(l=0);if(l){let e=t.querySelector('button[type="submit"]');e.innerHTML='<span class="spinner-border" role="status" aria-hidden="true"></span>',e.setAttribute("disabled",!0);let a={};for(const e of n)Object.assign(a,{[e.name]:getchips(e.parentNode.querySelector("div.chipsholder"),["id"])});Object.assign(a,{assurance:this.assurance,token:getdata("token")}),postschema.body=JSON.stringify(a);let r=await request("aTesTA",postschema);r.success&&deletechild(s,s.parentElement),alertMessage(r.message),e.removeAttribute("disabled"),e.innerHTML="proceed"}})}addOperation(e){let s=addshade();a=document.createElement("div"),s.appendChild(a),a.className="w-350p h-a p-10p bsbb bc-white cntr zi-10000 br-5p b-mgc-resp card",a.innerHTML='<div class="head w-100 h-50p py-10p px-15p bsbb">\n                            <span class="fs-18p bold-2 dgray capitalize igrid h-100 card-title">add an operation to restricted list</span>\n                        </div>\n                        <div class="body w-100 h-a p-5p grid">\n                            <form method="post" id="add-operation-form" name="add-operation-form">\n                                <div class="col-md-12 p-10p bsbb mb-5p p-r">\n                                    <label for="operations" class="form-label">operations</label>\n                                    <input type="text" class="form-control extras chips-check no-extra-info-addin" id="operation" placeholder="Operation Name" name="operations">\n                                    <small class="hidden w-100 red pl-3p verdana"></small>\n                                </div>\n                                <div class="wrap center-2 px-10p bsbb bblock-resp my-15p">\n                                    <button type="submit" class="btn btn-primary bfull-resp bm-a-resp bmy-10p-resp">Proceed</button>\n                                </div>\n                            </form>\n                        </div>';let t=a.querySelector("form"),n=Array.from(t.querySelectorAll("input")),r=n.find(function(e){return e.classList.contains("extras")});r.addEventListener("focus",a=>{showRecs(r,e,r.id)}),t.addEventListener("submit",async e=>{e.preventDefault(),l=1;for(const e of n)v=checkEmpty(e),v||(l=0);if(l){let e=t.querySelector('button[type="submit"]');e.innerHTML='<span class="spinner-border" role="status" aria-hidden="true"></span>',e.setAttribute("disabled",!0);let a={};for(const e of n)Object.assign(a,{[e.name]:getchips(e.parentNode.querySelector("div.chipsholder"),["id"])});Object.assign(a,{assurance:this.assurance,token:getdata("token")}),postschema.body=JSON.stringify(a);let r=await request("aOpeTA",postschema);r.success&&deletechild(s,s.parentElement),alertMessage(r.message),e.removeAttribute("disabled"),e.innerHTML="proceed"}})}addEquipment(e){let s=addshade();a=document.createElement("div"),s.appendChild(a),a.className="w-350p h-a p-10p bsbb bc-white cntr zi-10000 br-5p b-mgc-resp card",a.innerHTML='<div class="head w-100 h-50p py-10p px-15p bsbb">\n                            <span class="fs-18p bold-2 dgray capitalize igrid h-100 card-title">add an equipment to restricted list</span>\n                        </div>\n                        <div class="body w-100 h-a p-5p grid">\n                            <form method="post" id="add-equipment-form" name="add-equipment-form">\n                                <div class="col-md-12 p-10p bsbb mb-5p p-r">\n                                    <label for="equipments" class="form-label">equipments</label>\n                                    <input type="text" class="form-control extras chips-check no-quantity-addin" id="equipments" placeholder="Equipment Name" name="equipments">\n                                    <small class="hidden w-100 red pl-3p verdana"></small>\n                                </div>\n                                <div class="wrap center-2 px-10p bsbb bblock-resp my-15p">\n                                    <button type="submit" class="btn btn-primary bfull-resp bm-a-resp bmy-10p-resp">Proceed</button>\n                                </div>\n                            </form>\n                        </div>';let t=a.querySelector("form"),n=Array.from(t.querySelectorAll("input")),r=n.find(function(e){return e.classList.contains("extras")});r.addEventListener("focus",a=>{showRecs(r,e,r.id)}),t.addEventListener("submit",async e=>{e.preventDefault(),l=1;for(const e of n)v=checkEmpty(e),v||(l=0);if(l){let e=t.querySelector('button[type="submit"]');e.innerHTML='<span class="spinner-border" role="status" aria-hidden="true"></span>',e.setAttribute("disabled",!0);let a={};for(const e of n)Object.assign(a,{[e.name]:getchips(e.parentNode.querySelector("div.chipsholder"),["id"])});Object.assign(a,{assurance:this.assurance,token:getdata("token")}),postschema.body=JSON.stringify(a);let r=await request("aEquTA",postschema);r.success&&deletechild(s,s.parentElement),alertMessage(r.message),e.removeAttribute("disabled"),e.innerHTML="proceed"}})}addService(e){let s=addshade();a=document.createElement("div"),s.appendChild(a),a.className="w-350p h-a p-10p bsbb bc-white cntr zi-10000 br-5p b-mgc-resp card",a.innerHTML='<div class="head w-100 h-50p py-10p px-15p bsbb">\n                            <span class="fs-18p bold-2 dgray capitalize igrid h-100 card-title">add a service to restricted list</span>\n                        </div>\n                        <div class="body w-100 h-a p-5p grid">\n                            <form method="post" id="add-service-form" name="add-service-form">\n                                <div class="col-md-12 p-10p bsbb mb-5p p-r">\n                                    <label for="services" class="form-label">services</label>\n                                    <input type="text" class="form-control extras chips-check no-quantity-addin" id="services" placeholder="Service Name" name="services">\n                                    <small class="hidden w-100 red pl-3p verdana"></small>\n                                </div>\n                                <div class="wrap center-2 px-10p bsbb bblock-resp my-15p">\n                                    <button type="submit" class="btn btn-primary bfull-resp bm-a-resp bmy-10p-resp">Proceed</button>\n                                </div>\n                            </form>\n                        </div>';let t=a.querySelector("form"),n=Array.from(t.querySelectorAll("input")),r=n.find(function(e){return e.classList.contains("extras")});r.addEventListener("focus",a=>{showRecs(r,e,r.id)}),
t.addEventListener("submit",async e=>{e.preventDefault(),l=1;for(const e of n)v=checkEmpty(e),v||(l=0);if(l){let e=t.querySelector('button[type="submit"]');e.innerHTML='<span class="spinner-border" role="status" aria-hidden="true"></span>',e.setAttribute("disabled",!0);let a={};for(const e of n)Object.assign(a,{[e.name]:getchips(e.parentNode.querySelector("div.chipsholder"),["id"])});Object.assign(a,{assurance:this.assurance,token:getdata("token")}),postschema.body=JSON.stringify(a);let r=await request("aSerTA",postschema);r.success&&deletechild(s,s.parentElement),alertMessage(r.message),e.removeAttribute("disabled"),e.innerHTML="proceed"}})}async removeManager(e){e.classList.add("loading"),e.setAttribute("disabled",!0),e.innerText="removing...",postschema.body=JSON.stringify({token:getdata("token"),type:"managers",assurance:this.assurance,needle:e.getAttribute("data-id")});let a=await request("rAenrs",postschema);e.classList.remove("loading"),e.removeAttribute("disabled"),a.success?(alertMessage(a.message),deletechild(e.parentElement.parentElement.parentElement,e.parentElement.parentElement.parentElement.parentElement)):alertMessage(a.message)}async removeMedicine(e){e.classList.add("loading"),e.setAttribute("disabled",!0),e.innerText="removing...",postschema.body=JSON.stringify({token:getdata("token"),type:"rstctd_medicines",assurance:this.assurance,needle:e.getAttribute("data-id")});let a=await request("rAenrs",postschema);e.classList.remove("loading"),e.removeAttribute("disabled"),a.success?(alertMessage(a.message),deletechild(e.parentElement.parentElement.parentElement,e.parentElement.parentElement.parentElement.parentElement)):alertMessage(a.message)}async removeTest(e){e.classList.add("loading"),e.setAttribute("disabled",!0),e.innerText="removing...",postschema.body=JSON.stringify({token:getdata("token"),type:"rstctd_tests",assurance:this.assurance,needle:e.getAttribute("data-id")});let a=await request("rAenrs",postschema);e.classList.remove("loading"),e.removeAttribute("disabled"),a.success?(alertMessage(a.message),deletechild(e.parentElement.parentElement.parentElement,e.parentElement.parentElement.parentElement.parentElement)):alertMessage(a.message)}async removeOperation(e){e.classList.add("loading"),e.setAttribute("disabled",!0),e.innerText="removing...",postschema.body=JSON.stringify({token:getdata("token"),type:"rstctd_operations",assurance:this.assurance,needle:e.getAttribute("data-id")});let a=await request("rAenrs",postschema);e.classList.remove("loading"),e.removeAttribute("disabled"),a.success?(alertMessage(a.message),deletechild(e.parentElement.parentElement.parentElement,e.parentElement.parentElement.parentElement.parentElement)):alertMessage(a.message)}async removeEquipment(e){e.classList.add("loading"),e.setAttribute("disabled",!0),e.innerText="removing...",postschema.body=JSON.stringify({token:getdata("token"),type:"rstctd_equipments",assurance:this.assurance,needle:e.getAttribute("data-id")});let a=await request("rAenrs",postschema);e.classList.remove("loading"),e.removeAttribute("disabled"),a.success?(alertMessage(a.message),deletechild(e.parentElement.parentElement.parentElement,e.parentElement.parentElement.parentElement.parentElement)):alertMessage(a.message)}async removeService(e){e.classList.add("loading"),e.setAttribute("disabled",!0),e.innerText="removing...",postschema.body=JSON.stringify({token:getdata("token"),type:"rstctd_services",assurance:this.assurance,needle:e.getAttribute("data-id")});let a=await request("rAenrs",postschema);e.classList.remove("loading"),e.removeAttribute("disabled"),a.success?(alertMessage(a.message),deletechild(e.parentElement.parentElement.parentElement,e.parentElement.parentElement.parentElement.parentElement)):alertMessage(a.message)}}