import query from"../controllers/query.controller";import errorMessage from"../controllers/response.message.controller";import authenticateToken from"../controllers/token.verifier.controller";export const authorizeHospital=async(e,r,s,o)=>{try{let{token:a}=e.body,n=authenticateToken(a);if(n=n.token,"isoptional"!=o){var t=n.hospital;if(!t&&(t=e.body.hospital),!t)return r.status(403).send({message:errorMessage._err_hc_404,success:!1});let s=await query("select * from hospitals where id = ?",[t]);if(!s)return r.status(500).send({message:errorMessage.is_error,success:!1});if(0==s.length)return r.status(404).send({message:errorMessage._err_hc_404,success:!1})}s()}catch(e){console.log(e),r.status(500).send({message:errorMessage.is_error,success:!1})}};